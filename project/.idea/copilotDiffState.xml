<?xml version="1.0" encoding="UTF-8"?>
<project version="4">
  <component name="CopilotDiffPersistence">
    <option name="pendingDiffs">
      <map>
        <entry key="$PROJECT_DIR$/app/src/main/AndroidManifest.xml">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/app/src/main/AndroidManifest.xml" />
              <option name="originalContent" value="&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;&#10;&lt;manifest xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;&#10;    xmlns:tools=&quot;http://schemas.android.com/tools&quot;&gt;&#10;&#10;    &lt;uses-permission android:name=&quot;android.permission.ACCESS_FINE_LOCATION&quot; /&gt;&#10;    &lt;uses-permission android:name=&quot;android.permission.ACCESS_COARSE_LOCATION&quot; /&gt;&#10;&#10;    &lt;!-- for vocal research --&gt;&#10;    &lt;uses-permission android:name=&quot;android.permission.RECORD_AUDIO&quot; /&gt;&#10;&#10;    &lt;application&#10;        android:allowBackup=&quot;true&quot;&#10;        android:dataExtractionRules=&quot;@xml/data_extraction_rules&quot;&#10;        android:fullBackupContent=&quot;@xml/backup_rules&quot;&#10;        android:icon=&quot;@mipmap/ic_launcher&quot;&#10;        android:label=&quot;@string/app_name&quot;&#10;        android:roundIcon=&quot;@mipmap/ic_launcher_round&quot;&#10;        android:supportsRtl=&quot;true&quot;&#10;        android:theme=&quot;@style/Theme.Project&quot;&gt;&#10;        &lt;activity&#10;            android:name=&quot;.RestaurantViewActivity&quot;&#10;            android:exported=&quot;true&quot;&gt;&#10;            &lt;intent-filter&gt;&#10;                &lt;action android:name=&quot;android.intent.action.MAIN&quot; /&gt;&#10;&#10;                &lt;category android:name=&quot;android.intent.category.LAUNCHER&quot; /&gt;&#10;            &lt;/intent-filter&gt;&#10;        &lt;/activity&gt;&#10;        &lt;activity&#10;            android:name=&quot;.NewRestaurantActivity&quot;&#10;            android:exported=&quot;false&quot; /&gt;&#10;        &lt;activity android:name=&quot;.MapActivity&quot; /&gt;&#10;        &lt;activity&#10;            android:name=&quot;.LoginPageActivity&quot;&#10;            android:exported=&quot;false&quot; /&gt;&#10;        &lt;activity&#10;            android:name=&quot;.RestaurantDetailActivity&quot;&#10;            android:exported=&quot;false&quot;&#10;            android:parentActivityName=&quot;.RestaurantViewActivity&quot; /&gt;&#10;        &lt;activity&#10;            android:name=&quot;.RestaurantMenuActivity&quot;&#10;            android:exported=&quot;false&quot;&#10;            android:parentActivityName=&quot;.RestaurantDetailActivity&quot; /&gt;&#10;    &lt;/application&gt;&#10;&#10;&lt;/manifest&gt;" />
              <option name="updatedContent" value="&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;&#10;&lt;manifest xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;&#10;    xmlns:tools=&quot;http://schemas.android.com/tools&quot;&gt;&#10;&#10;    &lt;uses-permission android:name=&quot;android.permission.ACCESS_FINE_LOCATION&quot; /&gt;&#10;    &lt;uses-permission android:name=&quot;android.permission.ACCESS_COARSE_LOCATION&quot; /&gt;&#10;&#10;    &lt;!-- for vocal research --&gt;&#10;    &lt;uses-permission android:name=&quot;android.permission.RECORD_AUDIO&quot; /&gt;&#10;&#10;    &lt;application&#10;        android:allowBackup=&quot;true&quot;&#10;        android:dataExtractionRules=&quot;@xml/data_extraction_rules&quot;&#10;        android:fullBackupContent=&quot;@xml/backup_rules&quot;&#10;        android:icon=&quot;@mipmap/ic_launcher&quot;&#10;        android:label=&quot;@string/app_name&quot;&#10;        android:roundIcon=&quot;@mipmap/ic_launcher_round&quot;&#10;        android:supportsRtl=&quot;true&quot;&#10;        android:theme=&quot;@style/Theme.Project&quot;&gt;&#10;        &lt;activity&#10;            android:name=&quot;.RestaurantViewActivity&quot;&#10;            android:exported=&quot;true&quot;&gt;&#10;            &lt;intent-filter&gt;&#10;                &lt;action android:name=&quot;android.intent.action.MAIN&quot; /&gt;&#10;&#10;                &lt;category android:name=&quot;android.intent.category.LAUNCHER&quot; /&gt;&#10;            &lt;/intent-filter&gt;&#10;        &lt;/activity&gt;&#10;        &lt;activity&#10;            android:name=&quot;.NewRestaurantActivity&quot;&#10;            android:exported=&quot;false&quot; /&gt;&#10;        &lt;activity android:name=&quot;.MapActivity&quot; /&gt;&#10;        &lt;activity&#10;            android:name=&quot;.LoginPageActivity&quot;&#10;            android:exported=&quot;false&quot; /&gt;&#10;        &lt;activity&#10;            android:name=&quot;.RestaurantDetailActivity&quot;&#10;            android:exported=&quot;false&quot;&#10;            android:parentActivityName=&quot;.RestaurantViewActivity&quot; /&gt;&#10;        &lt;activity&#10;            android:name=&quot;.RestaurantMenuActivity&quot;&#10;            android:exported=&quot;false&quot;&#10;            android:parentActivityName=&quot;.RestaurantDetailActivity&quot; /&gt;&#10;    &lt;/application&gt;&#10;&#10;&lt;/manifest&gt;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/app/src/main/java/com/test/project/Dish.kt">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/app/src/main/java/com/test/project/Dish.kt" />
              <option name="updatedContent" value="package com.test.project&#10;&#10;data class Dish(&#10;    val id: Int,&#10;    val name: String,&#10;    val description: String,&#10;    val price: Double,&#10;    val imageUrl: String? = null&#10;)" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/app/src/main/java/com/test/project/RestaurantDetailActivity.kt">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/app/src/main/java/com/test/project/RestaurantDetailActivity.kt" />
              <option name="originalContent" value="package com.test.project&#10;&#10;import android.content.Intent&#10;import android.widget.Button&#10;import android.widget.ImageButton&#10;import android.widget.TextView&#10;import androidx.appcompat.app.AppCompatActivity&#10;&#10;class RestaurantDetailActivity : AppCompatActivity() {&#10;&#10;    override fun onCreate(savedInstanceState: android.os.Bundle?) {&#10;        super.onCreate(savedInstanceState)&#10;        setContentView(R.layout.activity_restaurant_detail)&#10;&#10;        // Initialize views&#10;        val restaurantNameTextView: TextView = findViewById(R.id.restaurantNameTextView)&#10;        val viewMenuButton: Button = findViewById(R.id.viewMenuButton)&#10;        val backButton: ImageButton = findViewById(R.id.backButton)&#10;&#10;        // Get restaurant name&#10;        val restaurantName = intent.getStringExtra(&quot;restaurantName&quot;) ?: &quot;Restaurant&quot;&#10;        restaurantNameTextView.text = restaurantName&#10;&#10;        // Set up button click listener&#10;        viewMenuButton.setOnClickListener {&#10;            val intent = Intent(this, RestaurantMenuActivity::class.java)&#10;            intent.putExtra(&quot;RESTAURANT_NAME&quot;, restaurantName)&#10;            startActivity(intent)&#10;        }&#10;&#10;        // Set up back button click listener&#10;        backButton.setOnClickListener {&#10;            // Let the system handle the back navigation&#10;            finish()&#10;        }&#10;    }&#10;}" />
              <option name="updatedContent" value="package com.test.project&#10;&#10;import android.content.Intent&#10;import android.widget.Button&#10;import android.widget.ImageButton&#10;import android.widget.TextView&#10;import androidx.appcompat.app.AppCompatActivity&#10;&#10;class RestaurantDetailActivity : AppCompatActivity() {&#10;&#10;    override fun onCreate(savedInstanceState: android.os.Bundle?) {&#10;        super.onCreate(savedInstanceState)&#10;        setContentView(R.layout.activity_restaurant_detail)&#10;&#10;        // Initialize views&#10;        val restaurantNameTextView: TextView = findViewById(R.id.restaurantNameTextView)&#10;        val viewMenuButton: Button = findViewById(R.id.viewMenuButton)&#10;        val backButton: ImageButton = findViewById(R.id.backButton)&#10;&#10;        // Get restaurant name&#10;        val restaurantName = intent.getStringExtra(&quot;restaurantName&quot;) ?: &quot;Restaurant&quot;&#10;        restaurantNameTextView.text = restaurantName&#10;&#10;        // Set up button click listener&#10;        viewMenuButton.setOnClickListener {&#10;            val intent = Intent(this, RestaurantMenuActivity::class.java)&#10;            intent.putExtra(&quot;RESTAURANT_NAME&quot;, restaurantName)&#10;            startActivity(intent)&#10;        }&#10;&#10;        // Set up back button click listener&#10;        backButton.setOnClickListener {&#10;            // Let the system handle the back navigation&#10;            finish()&#10;        }&#10;    }&#10;}" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/app/src/main/java/com/test/project/RestaurantMenuActivity.kt">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/app/src/main/java/com/test/project/RestaurantMenuActivity.kt" />
              <option name="originalContent" value="package com.test.project&#10;&#10;import android.os.Bundle&#10;import android.widget.ImageButton&#10;import android.widget.TextView&#10;import androidx.appcompat.app.AppCompatActivity&#10;import androidx.recyclerview.widget.LinearLayoutManager&#10;import androidx.recyclerview.widget.RecyclerView&#10;import com.test.project.database.Dish&#10;import com.test.project.database.DatabaseHelper&#10;&#10;class RestaurantMenuActivity : AppCompatActivity() {&#10;&#10;    private lateinit var backButton: ImageButton&#10;    private lateinit var restaurantNameToolbar: TextView&#10;    private lateinit var menuRecyclerView: RecyclerView&#10;    private lateinit var dishAdapter: DishAdapter&#10;    private lateinit var databaseHelper: DatabaseHelper&#10;&#10;    override fun onCreate(savedInstanceState: Bundle?) {&#10;        super.onCreate(savedInstanceState)&#10;        setContentView(R.layout.activity_restaurant_menu)&#10;&#10;        // Initialize database helper&#10;        databaseHelper = DatabaseHelper(this, 4)&#10;&#10;        // Initialize views&#10;        initViews()&#10;&#10;        // Get restaurant name from intent&#10;        val restaurantName = intent.getStringExtra(&quot;RESTAURANT_NAME&quot;) ?: &quot;Restaurant Menu&quot;&#10;        restaurantNameToolbar.text = restaurantName&#10;&#10;        // Setup RecyclerView&#10;        setupRecyclerView()&#10;&#10;        // Load menu data from database&#10;        loadMenuData(restaurantName)&#10;&#10;        // Setup click listeners&#10;        setupClickListeners()&#10;    }&#10;&#10;    private fun initViews() {&#10;        backButton = findViewById(R.id.backButton)&#10;        restaurantNameToolbar = findViewById(R.id.restaurantNameToolbar)&#10;        menuRecyclerView = findViewById(R.id.menuRecyclerView)&#10;    }&#10;&#10;    private fun setupRecyclerView() {&#10;        dishAdapter = DishAdapter(emptyList()) { dish -&gt;&#10;            // dish click - for now, just show a toast&#10;            android.widget.Toast.makeText(&#10;                this,&#10;                &quot;Selected: ${dish.name}&quot;,&#10;                android.widget.Toast.LENGTH_SHORT&#10;            ).show()&#10;        }&#10;&#10;        menuRecyclerView.apply {&#10;            adapter = dishAdapter&#10;            layoutManager = LinearLayoutManager(this@RestaurantMenuActivity)&#10;        }&#10;    }&#10;&#10;    private fun loadMenuData(restaurantName: String) {&#10;        val dishes = databaseHelper.getMenuForRestaurant(restaurantName)&#10;        dishAdapter.updateDishes(dishes)&#10;    }&#10;&#10;    private fun setupClickListeners() {&#10;        backButton.setOnClickListener {&#10;            // Let the system handle the back navigation&#10;            finish()&#10;        }&#10;    }&#10;}" />
              <option name="updatedContent" value="package com.test.project&#10;&#10;import android.os.Bundle&#10;import android.widget.ImageButton&#10;import android.widget.TextView&#10;import androidx.appcompat.app.AppCompatActivity&#10;import androidx.recyclerview.widget.LinearLayoutManager&#10;import androidx.recyclerview.widget.RecyclerView&#10;import com.test.project.database.Dish&#10;import com.test.project.database.DatabaseHelper&#10;&#10;class RestaurantMenuActivity : AppCompatActivity() {&#10;&#10;    private lateinit var backButton: ImageButton&#10;    private lateinit var restaurantNameToolbar: TextView&#10;    private lateinit var menuRecyclerView: RecyclerView&#10;    private lateinit var dishAdapter: DishAdapter&#10;    private lateinit var databaseHelper: DatabaseHelper&#10;&#10;    override fun onCreate(savedInstanceState: Bundle?) {&#10;        super.onCreate(savedInstanceState)&#10;        setContentView(R.layout.activity_restaurant_menu)&#10;&#10;        // Initialize database helper&#10;        databaseHelper = DatabaseHelper(this, 4)&#10;&#10;        // Initialize views&#10;        initViews()&#10;&#10;        // Get restaurant name from intent&#10;        val restaurantName = intent.getStringExtra(&quot;RESTAURANT_NAME&quot;) ?: &quot;Restaurant Menu&quot;&#10;        restaurantNameToolbar.text = restaurantName&#10;&#10;        // Setup RecyclerView&#10;        setupRecyclerView()&#10;&#10;        // Load menu data from database&#10;        loadMenuData(restaurantName)&#10;&#10;        // Setup click listeners&#10;        setupClickListeners()&#10;    }&#10;&#10;    private fun initViews() {&#10;        backButton = findViewById(R.id.backButton)&#10;        restaurantNameToolbar = findViewById(R.id.restaurantNameToolbar)&#10;        menuRecyclerView = findViewById(R.id.menuRecyclerView)&#10;    }&#10;&#10;    private fun setupRecyclerView() {&#10;        dishAdapter = DishAdapter(emptyList()) { dish -&gt;&#10;            // dish click - for now, just show a toast&#10;            android.widget.Toast.makeText(&#10;                this,&#10;                &quot;Selected: ${dish.name}&quot;,&#10;                android.widget.Toast.LENGTH_SHORT&#10;            ).show()&#10;        }&#10;&#10;        menuRecyclerView.apply {&#10;            adapter = dishAdapter&#10;            layoutManager = LinearLayoutManager(this@RestaurantMenuActivity)&#10;        }&#10;    }&#10;&#10;    private fun loadMenuData(restaurantName: String) {&#10;        val dishes = databaseHelper.getMenuForRestaurant(restaurantName)&#10;        dishAdapter.updateDishes(dishes)&#10;    }&#10;&#10;    private fun setupClickListeners() {&#10;        backButton.setOnClickListener {&#10;            // Let the system handle the back navigation&#10;            finish()&#10;        }&#10;    }&#10;}" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/app/src/main/java/com/test/project/RestaurantViewActivity.kt">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/app/src/main/java/com/test/project/RestaurantViewActivity.kt" />
              <option name="originalContent" value="package com.test.project&#10;&#10;import android.content.Intent&#10;import android.content.pm.PackageManager&#10;import android.os.Bundle&#10;import android.speech.RecognitionListener&#10;import android.speech.RecognizerIntent&#10;import android.speech.SpeechRecognizer&#10;import android.text.Editable&#10;import android.text.TextWatcher&#10;import android.widget.Button&#10;import android.widget.EditText&#10;import android.widget.ImageButton&#10;import androidx.appcompat.app.AppCompatActivity&#10;import androidx.core.app.ActivityCompat&#10;import androidx.recyclerview.widget.LinearLayoutManager&#10;import androidx.recyclerview.widget.RecyclerView&#10;import com.test.project.database.DatabaseHelper&#10;&#10;class RestaurantViewActivity : AppCompatActivity() {&#10;    private lateinit var databaseHelper: DatabaseHelper&#10;    private lateinit var adapter: RestaurantAdapter&#10;&#10;    private lateinit var speechRecognizer: SpeechRecognizer&#10;    private lateinit var speechRecognizerIntent: Intent&#10;&#10;    val permissionArray = arrayOf(&#10;        android.Manifest.permission.ACCESS_FINE_LOCATION,&#10;        android.Manifest.permission.ACCESS_COARSE_LOCATION,&#10;        android.Manifest.permission.RECORD_AUDIO&#10;    )&#10;&#10;    override fun onCreate(savedInstanceState: Bundle?) {&#10;        super.onCreate(savedInstanceState)&#10;        setContentView(R.layout.activity_restaurant_view)&#10;&#10;        val searchBox: EditText = findViewById(R.id.search_bar)&#10;        val rv: RecyclerView = findViewById(R.id.recyclerView)&#10;        val mapbtn: ImageButton = findViewById(R.id.btnMap)&#10;        val logbtn: ImageButton = findViewById(R.id.btnAccount)&#10;        val addbtn: ImageButton = findViewById(R.id.addTaskBtn)&#10;        val micSearchBtn: ImageButton = findViewById(R.id.voiceSearchBtn)&#10;&#10;        adapter = RestaurantAdapter()&#10;        rv.layoutManager = LinearLayoutManager(this)&#10;        rv.adapter = adapter&#10;&#10;      addbtn.setOnClickListener {&#10;            startActivity(Intent(this, NewRestaurantActivity::class.java))&#10;        }&#10;&#10;        mapbtn.setOnClickListener {&#10;            val intent = android.content.Intent(this, MapActivity::class.java)&#10;            startActivity(intent)&#10;        }&#10;&#10;        logbtn.setOnClickListener {&#10;            val intent = android.content.Intent(this, LoginPageActivity::class.java)&#10;            startActivity(intent)&#10;        }&#10;&#10;        searchBox.addTextChangedListener(object : TextWatcher {&#10;            override fun beforeTextChanged(s: CharSequence?, start: Int, count: Int, after: Int) {}&#10;            override fun onTextChanged(s: CharSequence?, start: Int, before: Int, count: Int) {&#10;                adapter.filter(s?.toString() ?: &quot;&quot;)&#10;            }&#10;            override fun afterTextChanged(s: Editable?) {}&#10;        })&#10;&#10;        // vocal research&#10;        if (checkSelfPermission(permissionArray[2]) != PackageManager.PERMISSION_GRANTED){&#10;            ActivityCompat.requestPermissions(this, permissionArray, 200)&#10;        }&#10;&#10;        speechRecognizer = SpeechRecognizer.createSpeechRecognizer(this)&#10;        speechRecognizerIntent = Intent(RecognizerIntent.ACTION_RECOGNIZE_SPEECH)&#10;        speechRecognizerIntent.putExtra(&#10;            RecognizerIntent.EXTRA_LANGUAGE_MODEL,&#10;            RecognizerIntent.LANGUAGE_MODEL_FREE_FORM&#10;        )&#10;&#10;        micSearchBtn.setOnTouchListener { v, event -&gt;&#10;            when (event.action) {&#10;                android.view.MotionEvent.ACTION_DOWN -&gt; {&#10;                    searchBox.setText(&quot;&quot;)&#10;                    searchBox.setHint(&quot;Listening...&quot;)&#10;&#10;                    speechRecognizer.startListening(speechRecognizerIntent)&#10;                    true&#10;                }&#10;                android.view.MotionEvent.ACTION_UP -&gt; {&#10;                    searchBox.setHint(&quot;Search restaurants or cuisine&quot;)&#10;&#10;                    speechRecognizer.stopListening()&#10;                    true&#10;                }&#10;                else -&gt; false&#10;            }&#10;&#10;        }&#10;&#10;        speechRecognizer.setRecognitionListener(object : RecognitionListener{&#10;            override fun onReadyForSpeech(params: Bundle?) {}&#10;            override fun onBeginningOfSpeech() {}&#10;            override fun onRmsChanged(rmsdB: Float) {}&#10;            override fun onBufferReceived(buffer: ByteArray?) {}&#10;            override fun onEndOfSpeech() {}&#10;            override fun onError(error: Int) {}&#10;            override fun onResults(results: Bundle?) {&#10;                val matches = results?.getStringArrayList(SpeechRecognizer.RESULTS_RECOGNITION)&#10;                if (matches != null &amp;&amp; matches.isNotEmpty()) {&#10;                    searchBox.setText(matches[0])&#10;                }&#10;            }&#10;            override fun onPartialResults(partialResults: Bundle?) {}&#10;            override fun onEvent(eventType: Int, params: Bundle?) {}&#10;        })&#10;&#10;&#10;&#10;    }&#10;&#10;    override fun onResume() {&#10;        super.onResume()&#10;        val databaseVersion = 4&#10;        databaseHelper = DatabaseHelper(this, databaseVersion)&#10;&#10;        adapter.submit(databaseHelper.getAllRestaurants())&#10;    }&#10;}" />
              <option name="updatedContent" value="package com.test.project&#13;&#10;&#13;&#10;import android.content.Intent&#13;&#10;import android.content.pm.PackageManager&#13;&#10;import android.os.Bundle&#13;&#10;import android.speech.RecognitionListener&#13;&#10;import android.speech.RecognizerIntent&#13;&#10;import android.speech.SpeechRecognizer&#13;&#10;import android.text.Editable&#13;&#10;import android.text.TextWatcher&#13;&#10;import android.widget.Button&#13;&#10;import android.widget.EditText&#13;&#10;import android.widget.ImageButton&#13;&#10;import androidx.appcompat.app.AppCompatActivity&#13;&#10;import androidx.core.app.ActivityCompat&#13;&#10;import androidx.recyclerview.widget.LinearLayoutManager&#13;&#10;import androidx.recyclerview.widget.RecyclerView&#13;&#10;import com.test.project.database.DatabaseHelper&#13;&#10;&#13;&#10;class RestaurantViewActivity : AppCompatActivity() {&#13;&#10;    private lateinit var databaseHelper: DatabaseHelper&#13;&#10;    private lateinit var adapter: RestaurantAdapter&#13;&#10;&#13;&#10;    private lateinit var speechRecognizer: SpeechRecognizer&#13;&#10;    private lateinit var speechRecognizerIntent: Intent&#13;&#10;&#13;&#10;    val permissionArray = arrayOf(&#13;&#10;        android.Manifest.permission.ACCESS_FINE_LOCATION,&#13;&#10;        android.Manifest.permission.ACCESS_COARSE_LOCATION,&#13;&#10;        android.Manifest.permission.RECORD_AUDIO&#13;&#10;    )&#13;&#10;&#13;&#10;    override fun onCreate(savedInstanceState: Bundle?) {&#13;&#10;        super.onCreate(savedInstanceState)&#13;&#10;        setContentView(R.layout.activity_restaurant_view)&#13;&#10;&#13;&#10;        val searchBox: EditText = findViewById(R.id.search_bar)&#13;&#10;        val rv: RecyclerView = findViewById(R.id.recyclerView)&#13;&#10;        val mapbtn: ImageButton = findViewById(R.id.btnMap)&#13;&#10;        val logbtn: ImageButton = findViewById(R.id.btnAccount)&#13;&#10;        val addbtn: ImageButton = findViewById(R.id.addTaskBtn)&#13;&#10;        val micSearchBtn: ImageButton = findViewById(R.id.voiceSearchBtn)&#13;&#10;&#13;&#10;        adapter = RestaurantAdapter()&#13;&#10;        rv.layoutManager = LinearLayoutManager(this)&#13;&#10;        rv.adapter = adapter&#13;&#10;&#13;&#10;      addbtn.setOnClickListener {&#13;&#10;            startActivity(Intent(this, NewRestaurantActivity::class.java))&#13;&#10;        }&#13;&#10;&#13;&#10;        mapbtn.setOnClickListener {&#13;&#10;            val intent = android.content.Intent(this, MapActivity::class.java)&#13;&#10;            startActivity(intent)&#13;&#10;        }&#13;&#10;&#13;&#10;        logbtn.setOnClickListener {&#13;&#10;            val intent = android.content.Intent(this, LoginPageActivity::class.java)&#13;&#10;            startActivity(intent)&#13;&#10;        }&#13;&#10;&#13;&#10;        searchBox.addTextChangedListener(object : TextWatcher {&#13;&#10;            override fun beforeTextChanged(s: CharSequence?, start: Int, count: Int, after: Int) {}&#13;&#10;            override fun onTextChanged(s: CharSequence?, start: Int, before: Int, count: Int) {&#13;&#10;                adapter.filter(s?.toString() ?: &quot;&quot;)&#13;&#10;            }&#13;&#10;            override fun afterTextChanged(s: Editable?) {}&#13;&#10;        })&#13;&#10;&#13;&#10;        // vocal research&#13;&#10;        if (checkSelfPermission(permissionArray[2]) != PackageManager.PERMISSION_GRANTED){&#13;&#10;            ActivityCompat.requestPermissions(this, permissionArray, 200)&#13;&#10;        }&#13;&#10;&#13;&#10;        speechRecognizer = SpeechRecognizer.createSpeechRecognizer(this)&#13;&#10;        speechRecognizerIntent = Intent(RecognizerIntent.ACTION_RECOGNIZE_SPEECH)&#13;&#10;        speechRecognizerIntent.putExtra(&#13;&#10;            RecognizerIntent.EXTRA_LANGUAGE_MODEL,&#13;&#10;            RecognizerIntent.LANGUAGE_MODEL_FREE_FORM&#13;&#10;        )&#13;&#10;&#13;&#10;        micSearchBtn.setOnTouchListener { v, event -&gt;&#13;&#10;            when (event.action) {&#13;&#10;                android.view.MotionEvent.ACTION_DOWN -&gt; {&#13;&#10;                    searchBox.setText(&quot;&quot;)&#13;&#10;                    searchBox.setHint(&quot;Listening...&quot;)&#13;&#10;&#13;&#10;                    speechRecognizer.startListening(speechRecognizerIntent)&#13;&#10;                    true&#13;&#10;                }&#13;&#10;                android.view.MotionEvent.ACTION_UP -&gt; {&#13;&#10;                    searchBox.setHint(&quot;Search restaurants or cuisine&quot;)&#13;&#10;&#13;&#10;                    speechRecognizer.stopListening()&#13;&#10;                    true&#13;&#10;                }&#13;&#10;                else -&gt; false&#13;&#10;            }&#13;&#10;&#13;&#10;        }&#13;&#10;&#13;&#10;        speechRecognizer.setRecognitionListener(object : RecognitionListener{&#13;&#10;            override fun onReadyForSpeech(params: Bundle?) {}&#13;&#10;            override fun onBeginningOfSpeech() {}&#13;&#10;            override fun onRmsChanged(rmsdB: Float) {}&#13;&#10;            override fun onBufferReceived(buffer: ByteArray?) {}&#13;&#10;            override fun onEndOfSpeech() {}&#13;&#10;            override fun onError(error: Int) {}&#13;&#10;            override fun onResults(results: Bundle?) {&#13;&#10;                val matches = results?.getStringArrayList(SpeechRecognizer.RESULTS_RECOGNITION)&#13;&#10;                if (matches != null &amp;&amp; matches.isNotEmpty()) {&#13;&#10;                    searchBox.setText(matches[0])&#13;&#10;                }&#13;&#10;            }&#13;&#10;            override fun onPartialResults(partialResults: Bundle?) {}&#13;&#10;            override fun onEvent(eventType: Int, params: Bundle?) {}&#13;&#10;        })&#13;&#10;&#13;&#10;&#13;&#10;&#13;&#10;    }&#13;&#10;&#13;&#10;    override fun onResume() {&#10;        super.onResume()&#10;        val databaseVersion = 4&#10;        databaseHelper = DatabaseHelper(this, databaseVersion)&#10;&#10;        adapter.submit(databaseHelper.getAllRestaurants())&#10;    }&#13;&#10;}" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/app/src/main/java/com/test/project/database/DatabaseHelper.kt">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/app/src/main/java/com/test/project/database/DatabaseHelper.kt" />
              <option name="originalContent" value="package com.test.project.database&#10;&#10;import android.content.Context&#10;import android.database.sqlite.SQLiteDatabase&#10;import android.database.sqlite.SQLiteOpenHelper&#10;&#10;import org.mindrot.jbcrypt.BCrypt&#10;&#10;class DatabaseHelper(&#10;    context: Context,&#10;) : SQLiteOpenHelper(&#10;    context,&#10;    &quot;project.db&quot;,&#10;    null,&#10;    5&#10;) {&#10;    override fun onCreate(db: SQLiteDatabase?) {&#10;        // Create Users table&#10;        db?.execSQL(&quot;&quot;&quot;&#10;            CREATE TABLE IF NOT EXISTS users (&#10;                id INTEGER PRIMARY KEY AUTOINCREMENT,&#10;                name TEXT NOT NULL,&#10;                email TEXT NOT NULL UNIQUE,&#10;                passwordHash TEXT NOT NULL,&#10;                salt TEXT NOT NULL&#10;            )&#10;        &quot;&quot;&quot;)&#10;&#10;        // Create Restaurants table&#10;        db?.execSQL(&quot;&quot;&quot;&#10;            CREATE TABLE IF NOT EXISTS restaurants (&#10;                id INTEGER PRIMARY KEY AUTOINCREMENT,&#10;                name TEXT NOT NULL,&#10;                address TEXT NOT NULL,&#10;                phoneNumber TEXT NOT NULL,&#10;                description TEXT,&#10;                shortDescription TEXT,&#10;                rating REAL&#10;            )&#10;        &quot;&quot;&quot;)&#10;&#10;        // Create Dishes table&#10;        db?.execSQL(&quot;&quot;&quot;&#10;            CREATE TABLE IF NOT EXISTS dishes (&#10;                id INTEGER PRIMARY KEY AUTOINCREMENT,&#10;                name TEXT NOT NULL,&#10;                description TEXT NOT NULL,&#10;                price REAL NOT NULL,&#10;                imageUrl TEXT&#10;            )&#10;        &quot;&quot;&quot;)&#10;&#10;        // Create Orders table&#10;        db?.execSQL(&quot;&quot;&quot;&#10;            CREATE TABLE IF NOT EXISTS orders (&#10;                orderId INTEGER PRIMARY KEY AUTOINCREMENT,&#10;                userId INTEGER NOT NULL,&#10;                restaurantId INTEGER NOT NULL,&#10;                FOREIGN KEY (userId) REFERENCES users(id) ON UPDATE CASCADE ON DELETE CASCADE,&#10;                FOREIGN KEY (restaurantId) REFERENCES restaurants(id) ON UPDATE CASCADE ON DELETE CASCADE&#10;            )&#10;        &quot;&quot;&quot;)&#10;&#10;        // Create OrderElements table&#10;        db?.execSQL(&quot;&quot;&quot;&#10;            CREATE TABLE IF NOT EXISTS order_elements (&#10;                orderId INTEGER NOT NULL,&#10;                dishId INTEGER NOT NULL,&#10;                PRIMARY KEY (orderId, dishId),&#10;                FOREIGN KEY (orderId) REFERENCES orders(orderId) ON UPDATE CASCADE ON DELETE CASCADE,&#10;                FOREIGN KEY (dishId) REFERENCES dishes(id) ON UPDATE CASCADE ON DELETE CASCADE&#10;            )&#10;        &quot;&quot;&quot;)&#10;&#10;        // Create Reviews table&#10;        db?.execSQL(&quot;&quot;&quot;&#10;            CREATE TABLE IF NOT EXISTS reviews (&#10;                userId INTEGER NOT NULL,&#10;                restaurantId INTEGER NOT NULL,&#10;                rating REAL NOT NULL,&#10;                comment TEXT,&#10;                PRIMARY KEY (userId, restaurantId),&#10;                FOREIGN KEY (userId) REFERENCES users(id) ON UPDATE CASCADE ON DELETE CASCADE,&#10;                FOREIGN KEY (restaurantId) REFERENCES restaurants(id) ON UPDATE CASCADE ON DELETE CASCADE&#10;            )&#10;        &quot;&quot;&quot;)&#10;&#10;        // Create Menu Elements table&#10;        db?.execSQL(&quot;&quot;&quot;&#10;            CREATE TABLE IF NOT EXISTS menu_elements (&#10;                restaurantId INTEGER NOT NULL,&#10;                dishId INTEGER NOT NULL,&#10;                PRIMARY KEY (restaurantId, dishId),&#10;                FOREIGN KEY (restaurantId) REFERENCES restaurants(id) ON UPDATE CASCADE ON DELETE CASCADE,&#10;                FOREIGN KEY (dishId) REFERENCES dishes(id) ON UPDATE CASCADE ON DELETE CASCADE&#10;            )&#10;        &quot;&quot;&quot;)&#10;&#10;        // insert premade data&#10;        insertPremadeUsers(db)&#10;        insertPremadeRestaurants(db)&#10;        insertPremadeDishes(db)&#10;    }&#10;&#10;    override fun onUpgrade(db: SQLiteDatabase?, oldVersion: Int, newVersion: Int) {&#10;        insertPremadeRestaurants(db)&#10;        // For major version changes, drop and recreate&#10;        db?.execSQL(&quot;DROP TABLE IF EXISTS menu_elements&quot;)&#10;        db?.execSQL(&quot;DROP TABLE IF EXISTS reviews&quot;)&#10;        db?.execSQL(&quot;DROP TABLE IF EXISTS order_elements&quot;)&#10;        db?.execSQL(&quot;DROP TABLE IF EXISTS orders&quot;)&#10;        db?.execSQL(&quot;DROP TABLE IF EXISTS dishes&quot;)&#10;        db?.execSQL(&quot;DROP TABLE IF EXISTS restaurants&quot;)&#10;        db?.execSQL(&quot;DROP TABLE IF EXISTS users&quot;)&#10;        onCreate(db)&#10;&#10;        insertPremadeRestaurants(db)&#10;    }&#10;&#10;&#10;    // example dishes&#10;    private  fun insertPremadeDishes(db: SQLiteDatabase?) {&#10;        val dishes = listOf(&#10;            Dish(&#10;                name = &quot;Margherita Pizza&quot;,&#10;                description = &quot;Classic pizza with tomato sauce, mozzarella cheese, and fresh basil&quot;,&#10;                price = 12.50&#10;            ),&#10;            Dish(&#10;                name = &quot;Spaghetti Carbonara&quot;,&#10;                description = &quot;Traditional Italian pasta with eggs, cheese, pancetta, and black pepper&quot;,&#10;                price = 14.00&#10;            ),&#10;            Dish(&#10;                name = &quot;Caesar Salad&quot;,&#10;                description = &quot;Fresh romaine lettuce, parmesan cheese, croutons with caesar dressing&quot;,&#10;                price = 9.50&#10;            ),&#10;            Dish(&#10;                name = &quot;Grilled Salmon&quot;,&#10;                description = &quot;Fresh salmon fillet grilled to perfection with lemon and herbs&quot;,&#10;                price = 18.00&#10;            ),&#10;            Dish(&#10;                name = &quot;Tiramisu&quot;,&#10;                description = &quot;Classic Italian dessert with coffee-soaked ladyfingers and mascarpone&quot;,&#10;                price = 6.50&#10;            ),&#10;            Dish(&#10;                name = &quot;Bruschetta&quot;,&#10;                description = &quot;Grilled bread topped with fresh tomatoes, garlic, and basil&quot;,&#10;                price = 7.00&#10;            ),&#10;            Dish(&#10;                name = &quot;Risotto ai Funghi&quot;,&#10;                description = &quot;Creamy rice dish with mixed mushrooms and parmesan cheese&quot;,&#10;                price = 15.50&#10;            ),&#10;            Dish(&#10;                name = &quot;Gelato&quot;,&#10;                description = &quot;Italian ice cream available in various flavors&quot;,&#10;                price = 4.50&#10;            )&#10;        )&#10;&#10;        dishes.forEach { dish -&gt;&#10;            db?.insert(&quot;dishes&quot;, null, dish.toContentValues())&#10;        }&#10;&#10;        // link dishes to restaurants in menu_elements table&#10;        val menuElements = listOf(&#10;            Pair(1, 1), // Spaghetti Carbonara to Symposium Cafe&#10;            Pair(1, 2), // Margherita Pizza to Symposium Cafe&#10;            Pair(2, 3),  // Caesar Salad to The Keg Oshawa&#10;            Pair(3, 4), // Grilled Salmon to Fazio's Italian Restaurant&#10;            Pair(3, 5), // Tiramisu to Fazio's Italian Restaurant&#10;            Pair(4, 6), // Bruschetta to Sushi Masa Japanese Restaurant&#10;            Pair(5, 7), // Risotto ai Funghi to Oshawa House Restaurant&#10;            Pair(5, 8)  // Gelato to Oshawa House Restaurant&#10;        )&#10;&#10;        menuElements.forEach { (restaurantId, dishId) -&gt;&#10;            val contentValues = android.content.ContentValues().apply {&#10;                put(&quot;restaurantId&quot;, restaurantId)&#10;                put(&quot;dishId&quot;, dishId)&#10;            }&#10;            db?.insert(&quot;menu_elements&quot;, null, contentValues)&#10;        }&#10;    }&#10;&#10;    // example restaurants&#10;    private fun insertPremadeRestaurants(db: SQLiteDatabase?) {&#10;        val restaurants = listOf(&#10;            Restaurant(&#10;                name = &quot;Symposium Cafe Restaurant &amp; Lounge&quot;,&#10;                description = &quot;A vibrant restaurant and lounge offering contemporary Canadian cuisine with international influences. Known for their extensive menu featuring everything from pasta and steaks to fresh salads and creative desserts. The atmosphere is warm and welcoming, perfect for both casual dining and special occasions.&quot;,&#10;                shortDescription = &quot;Contemporary Canadian cuisine&quot;,&#10;                rating = 4.2f,&#10;                address = &quot;1300 King St E, Oshawa, ON L1H 8J4&quot;,&#10;                phoneNumber = &quot;(905) 436-3354&quot;&#10;            ),&#10;            Restaurant(&#10;                name = &quot;The Keg Oshawa&quot;,&#10;                description = &quot;A classic steakhouse chain known for their premium steaks, fresh seafood, and signature caesar salads. The Keg offers a sophisticated dining experience with their dark wood decor and comfortable atmosphere. Their menu features AAA grade steaks, lobster, and an extensive wine selection.&quot;,&#10;                shortDescription = &quot;Premium steakhouse&quot;,&#10;                rating = 4.4f,&#10;                address = &quot;1200 Thornton Rd N, Oshawa, ON L1H 7K4&quot;,&#10;                phoneNumber = &quot;(905) 433-3700&quot;&#10;            ),&#10;            Restaurant(&#10;                name = &quot;Fazio's Italian Restaurant&quot;,&#10;                description = &quot;Family-owned authentic Italian restaurant serving traditional recipes passed down through generations. Features homemade pasta, wood-fired pizza, and classic Italian entrees. The cozy atmosphere and friendly service make it feel like dining at an Italian family's home.&quot;,&#10;                shortDescription = &quot;Authentic Italian family dining&quot;,&#10;                rating = 4.6f,&#10;                address = &quot;1668 Simcoe St N, Oshawa, ON L1G 4X6&quot;,&#10;                phoneNumber = &quot;(905) 436-3287&quot;&#10;            ),&#10;            Restaurant(&#10;                name = &quot;Sushi Masa Japanese Restaurant&quot;,&#10;                description = &quot;Fresh and authentic Japanese cuisine featuring expertly crafted sushi, sashimi, and traditional Japanese dishes. The chef uses only the finest ingredients to create beautiful presentations. The minimalist decor creates a peaceful dining environment perfect for enjoying the artistry of Japanese cuisine.&quot;,&#10;                shortDescription = &quot;Fresh authentic Japanese sushi&quot;,&#10;                rating = 4.5f,&#10;                address = &quot;1300 King St E Unit 3, Oshawa, ON L1H 8J4&quot;,&#10;                phoneNumber = &quot;(905) 240-0888&quot;&#10;            ),&#10;            Restaurant(&#10;                name = &quot;Oshawa House Restaurant&quot;,&#10;                description = &quot;A local landmark serving comfort food and traditional favorites for over 30 years. Known for their generous portions, friendly service, and classic diner atmosphere. Popular for breakfast all day, hearty burgers, and homestyle dinners that remind you of home cooking.&quot;,&#10;                shortDescription = &quot;Classic comfort food diner&quot;,&#10;                rating = 4.1f,&#10;                address = &quot;1425 King St E, Oshawa, ON L1H 8J6&quot;,&#10;                phoneNumber = &quot;(905) 579-4449&quot;&#10;            )&#10;        )&#10;&#10;        restaurants.forEach { restaurant -&gt;&#10;            db?.insert(&quot;restaurants&quot;, null, restaurant.toContentValues())&#10;        }&#10;    }&#10;&#10;    // insert premade users&#10;    private fun insertPremadeUsers(db: SQLiteDatabase?) {&#10;&#10;        registerUser(&quot;Edoardo&quot;, &quot;edoardo.borlina@gmail.com&quot;, &quot;password&quot;)&#10;        registerUser(&quot;User&quot;, &quot;user.example@email.com&quot;, &quot;password&quot;)&#10;    }&#10;    /// Restaurants Table Methods&#10;&#10;    // Get all restaurants&#10;    fun getAllRestaurants(): List&lt;Restaurant&gt; {&#10;        val restaurants = mutableListOf&lt;Restaurant&gt;()&#10;        val db = readableDatabase&#10;        val cursor = db.rawQuery(&quot;SELECT * FROM restaurants&quot;, null)&#10;        while (cursor.moveToNext()) {&#10;            val restaurant: Restaurant = Restaurant.getFromCursor(cursor)&#10;            restaurants.add(restaurant)&#10;        }&#10;        cursor.close()&#10;        return restaurants&#10;    }&#10;&#10;    // insert a restaurant&#10;    fun insertRestaurant(restaurant: Restaurant){&#10;        val db = writableDatabase&#10;        db.insert(&quot;restaurants&quot;, null, restaurant.toContentValues())&#10;    }&#10;&#10;&#10;    // Menu and Menu elements Methods&#10;    // Get menu for a restaurant given the name&#10;    fun getMenuForRestaurant(restaurantName: String): List&lt;Dish&gt; {&#10;        val dishes = mutableListOf&lt;Dish&gt;()&#10;        val db = readableDatabase&#10;        val query = &quot;&quot;&quot;&#10;            SELECT d.* FROM dishes d&#10;            JOIN menu_elements me ON d.id = me.dishId&#10;            JOIN restaurants r ON me.restaurantId = r.id&#10;            WHERE r.name = ?&#10;        &quot;&quot;&quot;&#10;        val cursor = db.rawQuery(query, arrayOf(restaurantName))&#10;        while (cursor.moveToNext()) {&#10;            val dish: Dish = Dish.getFromCursor(cursor)&#10;            dishes.add(dish)&#10;        }&#10;        cursor.close()&#10;        return dishes&#10;    }&#10;&#10;    // User Table Methods&#10;&#10;    // retrieve user by email&#10;    fun getUserByEmail(email: String): User? {&#10;        val db = readableDatabase&#10;        val cursor = db.rawQuery(&quot;SELECT * FROM users WHERE email = ?&quot;, arrayOf(email))&#10;        var user: User? = null&#10;        if (cursor.moveToFirst()) {&#10;            user = User.getFromCursor(cursor)&#10;        }&#10;        cursor.close()&#10;        return user&#10;    }&#10;&#10;    // register user&#10;    fun registerUser(name: String, email: String, password: String): Boolean {&#10;        val db = writableDatabase&#10;&#10;        // check if user already exists&#10;        val existingUser = getUserByEmail(email)&#10;        if (existingUser != null) {&#10;            return false&#10;        }&#10;&#10;&#10;        val salt = BCrypt.gensalt()&#10;        val passwordHash = BCrypt.hashpw(password, salt)&#10;&#10;        val user = User(&#10;            name = name,&#10;            email = email,&#10;            passwordHash = passwordHash,&#10;            salt = salt&#10;        )&#10;&#10;        val result = db.insert(&quot;users&quot;, null, user.toContentValues())&#10;        return result != -1L&#10;    }&#10;&#10;    // autenticate userÃ¹&#10;    fun authenticateUser(email: String, password: String): User? {&#10;        val user = getUserByEmail(email) ?: return null&#10;&#10;        return if (BCrypt.checkpw(password, user.passwordHash)) {&#10;            user&#10;        } else {&#10;            null&#10;        }&#10;    }&#10;&#10;&#10;}&#10;&#10;&#10;" />
              <option name="updatedContent" value="package com.test.project.database&#10;&#10;import android.content.Context&#10;import android.database.sqlite.SQLiteDatabase&#10;import android.database.sqlite.SQLiteOpenHelper&#10;&#10;import org.mindrot.jbcrypt.BCrypt&#10;&#10;class DatabaseHelper(&#10;    context: Context,&#10;) : SQLiteOpenHelper(&#10;    context,&#10;    &quot;project.db&quot;,&#10;    null,&#10;    5&#10;) {&#10;    override fun onCreate(db: SQLiteDatabase?) {&#10;        // Create Users table&#10;        db?.execSQL(&quot;&quot;&quot;&#10;            CREATE TABLE IF NOT EXISTS users (&#10;                id INTEGER PRIMARY KEY AUTOINCREMENT,&#10;                name TEXT NOT NULL,&#10;                email TEXT NOT NULL UNIQUE,&#10;                passwordHash TEXT NOT NULL,&#10;                salt TEXT NOT NULL&#10;            )&#10;        &quot;&quot;&quot;)&#10;&#10;        // Create Restaurants table&#10;        db?.execSQL(&quot;&quot;&quot;&#10;            CREATE TABLE IF NOT EXISTS restaurants (&#10;                id INTEGER PRIMARY KEY AUTOINCREMENT,&#10;                name TEXT NOT NULL,&#10;                address TEXT NOT NULL,&#10;                phoneNumber TEXT NOT NULL,&#10;                description TEXT,&#10;                shortDescription TEXT,&#10;                rating REAL&#10;            )&#10;        &quot;&quot;&quot;)&#10;&#10;        // Create Dishes table&#10;        db?.execSQL(&quot;&quot;&quot;&#10;            CREATE TABLE IF NOT EXISTS dishes (&#10;                id INTEGER PRIMARY KEY AUTOINCREMENT,&#10;                name TEXT NOT NULL,&#10;                description TEXT NOT NULL,&#10;                price REAL NOT NULL,&#10;                imageUrl TEXT&#10;            )&#10;        &quot;&quot;&quot;)&#10;&#10;        // Create Orders table&#10;        db?.execSQL(&quot;&quot;&quot;&#10;            CREATE TABLE IF NOT EXISTS orders (&#10;                orderId INTEGER PRIMARY KEY AUTOINCREMENT,&#10;                userId INTEGER NOT NULL,&#10;                restaurantId INTEGER NOT NULL,&#10;                FOREIGN KEY (userId) REFERENCES users(id) ON UPDATE CASCADE ON DELETE CASCADE,&#10;                FOREIGN KEY (restaurantId) REFERENCES restaurants(id) ON UPDATE CASCADE ON DELETE CASCADE&#10;            )&#10;        &quot;&quot;&quot;)&#10;&#10;        // Create OrderElements table&#10;        db?.execSQL(&quot;&quot;&quot;&#10;            CREATE TABLE IF NOT EXISTS order_elements (&#10;                orderId INTEGER NOT NULL,&#10;                dishId INTEGER NOT NULL,&#10;                PRIMARY KEY (orderId, dishId),&#10;                FOREIGN KEY (orderId) REFERENCES orders(orderId) ON UPDATE CASCADE ON DELETE CASCADE,&#10;                FOREIGN KEY (dishId) REFERENCES dishes(id) ON UPDATE CASCADE ON DELETE CASCADE&#10;            )&#10;        &quot;&quot;&quot;)&#10;&#10;        // Create Reviews table&#10;        db?.execSQL(&quot;&quot;&quot;&#10;            CREATE TABLE IF NOT EXISTS reviews (&#10;                userId INTEGER NOT NULL,&#10;                restaurantId INTEGER NOT NULL,&#10;                rating REAL NOT NULL,&#10;                comment TEXT,&#10;                PRIMARY KEY (userId, restaurantId),&#10;                FOREIGN KEY (userId) REFERENCES users(id) ON UPDATE CASCADE ON DELETE CASCADE,&#10;                FOREIGN KEY (restaurantId) REFERENCES restaurants(id) ON UPDATE CASCADE ON DELETE CASCADE&#10;            )&#10;        &quot;&quot;&quot;)&#10;&#10;        // Create Menu Elements table&#10;        db?.execSQL(&quot;&quot;&quot;&#10;            CREATE TABLE IF NOT EXISTS menu_elements (&#10;                restaurantId INTEGER NOT NULL,&#10;                dishId INTEGER NOT NULL,&#10;                PRIMARY KEY (restaurantId, dishId),&#10;                FOREIGN KEY (restaurantId) REFERENCES restaurants(id) ON UPDATE CASCADE ON DELETE CASCADE,&#10;                FOREIGN KEY (dishId) REFERENCES dishes(id) ON UPDATE CASCADE ON DELETE CASCADE&#10;            )&#10;        &quot;&quot;&quot;)&#10;&#10;        // insert premade data&#10;        insertPremadeUsers(db)&#10;        insertPremadeRestaurants(db)&#10;        insertPremadeDishes(db)&#10;    }&#10;&#10;    override fun onUpgrade(db: SQLiteDatabase?, oldVersion: Int, newVersion: Int) {&#10;        insertPremadeRestaurants(db)&#10;        // For major version changes, drop and recreate&#10;        db?.execSQL(&quot;DROP TABLE IF EXISTS menu_elements&quot;)&#10;        db?.execSQL(&quot;DROP TABLE IF EXISTS reviews&quot;)&#10;        db?.execSQL(&quot;DROP TABLE IF EXISTS order_elements&quot;)&#10;        db?.execSQL(&quot;DROP TABLE IF EXISTS orders&quot;)&#10;        db?.execSQL(&quot;DROP TABLE IF EXISTS dishes&quot;)&#10;        db?.execSQL(&quot;DROP TABLE IF EXISTS restaurants&quot;)&#10;        db?.execSQL(&quot;DROP TABLE IF EXISTS users&quot;)&#10;        onCreate(db)&#10;&#10;        insertPremadeRestaurants(db)&#10;    }&#10;&#10;&#10;    // example dishes&#10;    private  fun insertPremadeDishes(db: SQLiteDatabase?) {&#10;        val dishes = listOf(&#10;            Dish(&#10;                name = &quot;Margherita Pizza&quot;,&#10;                description = &quot;Classic pizza with tomato sauce, mozzarella cheese, and fresh basil&quot;,&#10;                price = 12.50&#10;            ),&#10;            Dish(&#10;                name = &quot;Spaghetti Carbonara&quot;,&#10;                description = &quot;Traditional Italian pasta with eggs, cheese, pancetta, and black pepper&quot;,&#10;                price = 14.00&#10;            ),&#10;            Dish(&#10;                name = &quot;Caesar Salad&quot;,&#10;                description = &quot;Fresh romaine lettuce, parmesan cheese, croutons with caesar dressing&quot;,&#10;                price = 9.50&#10;            ),&#10;            Dish(&#10;                name = &quot;Grilled Salmon&quot;,&#10;                description = &quot;Fresh salmon fillet grilled to perfection with lemon and herbs&quot;,&#10;                price = 18.00&#10;            ),&#10;            Dish(&#10;                name = &quot;Tiramisu&quot;,&#10;                description = &quot;Classic Italian dessert with coffee-soaked ladyfingers and mascarpone&quot;,&#10;                price = 6.50&#10;            ),&#10;            Dish(&#10;                name = &quot;Bruschetta&quot;,&#10;                description = &quot;Grilled bread topped with fresh tomatoes, garlic, and basil&quot;,&#10;                price = 7.00&#10;            ),&#10;            Dish(&#10;                name = &quot;Risotto ai Funghi&quot;,&#10;                description = &quot;Creamy rice dish with mixed mushrooms and parmesan cheese&quot;,&#10;                price = 15.50&#10;            ),&#10;            Dish(&#10;                name = &quot;Gelato&quot;,&#10;                description = &quot;Italian ice cream available in various flavors&quot;,&#10;                price = 4.50&#10;            )&#10;        )&#10;&#10;        dishes.forEach { dish -&gt;&#10;            db?.insert(&quot;dishes&quot;, null, dish.toContentValues())&#10;        }&#10;&#10;        // link dishes to restaurants in menu_elements table&#10;        val menuElements = listOf(&#10;            Pair(1, 1), // Spaghetti Carbonara to Symposium Cafe&#10;            Pair(1, 2), // Margherita Pizza to Symposium Cafe&#10;            Pair(2, 3),  // Caesar Salad to The Keg Oshawa&#10;            Pair(3, 4), // Grilled Salmon to Fazio's Italian Restaurant&#10;            Pair(3, 5), // Tiramisu to Fazio's Italian Restaurant&#10;            Pair(4, 6), // Bruschetta to Sushi Masa Japanese Restaurant&#10;            Pair(5, 7), // Risotto ai Funghi to Oshawa House Restaurant&#10;            Pair(5, 8)  // Gelato to Oshawa House Restaurant&#10;        )&#10;&#10;        menuElements.forEach { (restaurantId, dishId) -&gt;&#10;            val contentValues = android.content.ContentValues().apply {&#10;                put(&quot;restaurantId&quot;, restaurantId)&#10;                put(&quot;dishId&quot;, dishId)&#10;            }&#10;            db?.insert(&quot;menu_elements&quot;, null, contentValues)&#10;        }&#10;    }&#10;&#10;    // example restaurants&#10;    private fun insertPremadeRestaurants(db: SQLiteDatabase?) {&#10;        val restaurants = listOf(&#10;            Restaurant(&#10;                name = &quot;Symposium Cafe Restaurant &amp; Lounge&quot;,&#10;                description = &quot;A vibrant restaurant and lounge offering contemporary Canadian cuisine with international influences. Known for their extensive menu featuring everything from pasta and steaks to fresh salads and creative desserts. The atmosphere is warm and welcoming, perfect for both casual dining and special occasions.&quot;,&#10;                shortDescription = &quot;Contemporary Canadian cuisine&quot;,&#10;                rating = 4.2f,&#10;                address = &quot;1300 King St E, Oshawa, ON L1H 8J4&quot;,&#10;                phoneNumber = &quot;(905) 436-3354&quot;&#10;            ),&#10;            Restaurant(&#10;                name = &quot;The Keg Oshawa&quot;,&#10;                description = &quot;A classic steakhouse chain known for their premium steaks, fresh seafood, and signature caesar salads. The Keg offers a sophisticated dining experience with their dark wood decor and comfortable atmosphere. Their menu features AAA grade steaks, lobster, and an extensive wine selection.&quot;,&#10;                shortDescription = &quot;Premium steakhouse&quot;,&#10;                rating = 4.4f,&#10;                address = &quot;1200 Thornton Rd N, Oshawa, ON L1H 7K4&quot;,&#10;                phoneNumber = &quot;(905) 433-3700&quot;&#10;            ),&#10;            Restaurant(&#10;                name = &quot;Fazio's Italian Restaurant&quot;,&#10;                description = &quot;Family-owned authentic Italian restaurant serving traditional recipes passed down through generations. Features homemade pasta, wood-fired pizza, and classic Italian entrees. The cozy atmosphere and friendly service make it feel like dining at an Italian family's home.&quot;,&#10;                shortDescription = &quot;Authentic Italian family dining&quot;,&#10;                rating = 4.6f,&#10;                address = &quot;1668 Simcoe St N, Oshawa, ON L1G 4X6&quot;,&#10;                phoneNumber = &quot;(905) 436-3287&quot;&#10;            ),&#10;            Restaurant(&#10;                name = &quot;Sushi Masa Japanese Restaurant&quot;,&#10;                description = &quot;Fresh and authentic Japanese cuisine featuring expertly crafted sushi, sashimi, and traditional Japanese dishes. The chef uses only the finest ingredients to create beautiful presentations. The minimalist decor creates a peaceful dining environment perfect for enjoying the artistry of Japanese cuisine.&quot;,&#10;                shortDescription = &quot;Fresh authentic Japanese sushi&quot;,&#10;                rating = 4.5f,&#10;                address = &quot;1300 King St E Unit 3, Oshawa, ON L1H 8J4&quot;,&#10;                phoneNumber = &quot;(905) 240-0888&quot;&#10;            ),&#10;            Restaurant(&#10;                name = &quot;Oshawa House Restaurant&quot;,&#10;                description = &quot;A local landmark serving comfort food and traditional favorites for over 30 years. Known for their generous portions, friendly service, and classic diner atmosphere. Popular for breakfast all day, hearty burgers, and homestyle dinners that remind you of home cooking.&quot;,&#10;                shortDescription = &quot;Classic comfort food diner&quot;,&#10;                rating = 4.1f,&#10;                address = &quot;1425 King St E, Oshawa, ON L1H 8J6&quot;,&#10;                phoneNumber = &quot;(905) 579-4449&quot;&#10;            )&#10;        )&#10;&#10;        restaurants.forEach { restaurant -&gt;&#10;            db?.insert(&quot;restaurants&quot;, null, restaurant.toContentValues())&#10;        }&#10;    }&#10;&#10;    // insert premade users&#10;    private fun insertPremadeUsers(db: SQLiteDatabase?) {&#10;&#10;        registerUser(&quot;Edoardo&quot;, &quot;edoardo.borlina@gmail.com&quot;, &quot;password&quot;)&#10;        registerUser(&quot;User&quot;, &quot;user.example@email.com&quot;, &quot;password&quot;)&#10;    }&#10;    /// Restaurants Table Methods&#10;&#10;    // Get all restaurants&#10;    fun getAllRestaurants(): List&lt;Restaurant&gt; {&#10;        val restaurants = mutableListOf&lt;Restaurant&gt;()&#10;        val db = readableDatabase&#10;        val cursor = db.rawQuery(&quot;SELECT * FROM restaurants&quot;, null)&#10;        while (cursor.moveToNext()) {&#10;            val restaurant: Restaurant = Restaurant.getFromCursor(cursor)&#10;            restaurants.add(restaurant)&#10;        }&#10;        cursor.close()&#10;        return restaurants&#10;    }&#10;&#10;    // insert a restaurant&#10;    fun insertRestaurant(restaurant: Restaurant){&#10;        val db = writableDatabase&#10;        db.insert(&quot;restaurants&quot;, null, restaurant.toContentValues())&#10;    }&#10;&#10;&#10;    // Menu and Menu elements Methods&#10;    // Get menu for a restaurant given the name&#10;    fun getMenuForRestaurant(restaurantName: String): List&lt;Dish&gt; {&#10;        val dishes = mutableListOf&lt;Dish&gt;()&#10;        val db = readableDatabase&#10;        val query = &quot;&quot;&quot;&#10;            SELECT d.* FROM dishes d&#10;            JOIN menu_elements me ON d.id = me.dishId&#10;            JOIN restaurants r ON me.restaurantId = r.id&#10;            WHERE r.name = ?&#10;        &quot;&quot;&quot;&#10;        val cursor = db.rawQuery(query, arrayOf(restaurantName))&#10;        while (cursor.moveToNext()) {&#10;            val dish: Dish = Dish.getFromCursor(cursor)&#10;            dishes.add(dish)&#10;        }&#10;        cursor.close()&#10;        return dishes&#10;    }&#10;&#10;    // User Table Methods&#10;&#10;    // retrieve user by email&#10;    fun getUserByEmail(email: String): User? {&#10;        val db = readableDatabase&#10;        val cursor = db.rawQuery(&quot;SELECT * FROM users WHERE email = ?&quot;, arrayOf(email))&#10;        var user: User? = null&#10;        if (cursor.moveToFirst()) {&#10;            user = User.getFromCursor(cursor)&#10;        }&#10;        cursor.close()&#10;        return user&#10;    }&#10;&#10;    // register user&#10;    fun registerUser(name: String, email: String, password: String): Boolean {&#10;        val db = writableDatabase&#10;&#10;        // check if user already exists&#10;        val existingUser = getUserByEmail(email)&#10;        if (existingUser != null) {&#10;            return false&#10;        }&#10;&#10;&#10;        val salt = BCrypt.gensalt()&#10;        val passwordHash = BCrypt.hashpw(password, salt)&#10;&#10;        val user = User(&#10;            name = name,&#10;            email = email,&#10;            passwordHash = passwordHash,&#10;            salt = salt&#10;        )&#10;&#10;        val result = db.insert(&quot;users&quot;, null, user.toContentValues())&#10;        return result != -1L&#10;    }&#10;&#10;    // autenticate userÃ¹&#10;    fun authenticateUser(email: String, password: String): User? {&#10;        val user = getUserByEmail(email) ?: return null&#10;&#10;        return if (BCrypt.checkpw(password, user.passwordHash)) {&#10;            user&#10;        } else {&#10;            null&#10;        }&#10;    }&#10;&#10;&#10;}&#10;&#10;&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
      </map>
    </option>
  </component>
</project>